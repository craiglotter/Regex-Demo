<HTML>
<!-- Mirrored from www.regular-expressions.info/conditional.html by HTTrack Website Copier/3.x [XR&CO'2002], Mon, 14 Nov 2005 11:49:52 GMT -->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Regex Tutorial - If-Then-Else Conditionals</TITLE>

<META NAME="Author" CONTENT="Jan Goyvaerts">
<META NAME="Description" CONTENT="In Perl's regex flavor, and compatible flavors, you can use a special construct to create conditional if-then-else regular expressions.">
<META NAME="Keywords" CONTENT="">
<LINK REL=StyleSheet HREF="regex.css" TYPE="text/css">
</HEAD>
<BODY BGCOLOR=white TEXT=black>
<DIV CLASS=top><DIV CLASS=logo><IMG SRC="img/logo.gif" WIDTH=530 HEIGHT=100></DIV></DIV>
<DIV CLASS=btntop><A CLASS=btntop HREF="tutorial.html" TARGET="_top">&nbsp;Tutorial&nbsp;</A><A CLASS=btntop HREF="tools.html" TARGET="_top">&nbsp;Tools&nbsp;&amp;&nbsp;Languages&nbsp;</A><A CLASS=btntop HREF="examples.html" TARGET="_top">&nbsp;Examples&nbsp;</A><A CLASS=btntop HREF="books.html" TARGET="_top">&nbsp;Books&nbsp;&amp;&nbsp;Reference&nbsp;</A></DIV>
<DIV CLASS=bodytext>
<TABLE CLASS=topad> <TR><TD VALIGN=top><A HREF="http://www.regexbuddy.com/create.html" TARGET="_top"><IMG SRC="img/rxb48.gif" WIDTH=48 HEIGHT=48 ALT="RegexBuddy" BORDER=0></A></TD> <TD CLASS=topad><A HREF="http://www.regexbuddy.com/create.html" TARGET="_top">Easily create and understand regular expressions today</A>. Compose and analyze regex patterns with RegexBuddy's easy-to-grasp regex blocks and intuitive regex tree, instead of or in combination with the traditional regex syntax. Developed by the author of this web site, RegexBuddy makes learning and using regular expressions easier than ever. <A HREF="http://www.regexbuddy.com/">Get your own copy of RegexBuddy now</A>, and get a FREE printable PDF version of the regex tutorial on this web site.</TD> </TR></TABLE> <H1>If-Then-Else Conditionals in Regular Expressions</H1> <P>A special construct <TT CLASS=regex>(?ifthen|else)</TT> allows you to create conditional regular expressions. If the <EM>if</EM> part evaluates to true, then the regex engine will attempt to match the <EM>then</EM> part. Otherwise, the <EM>else</EM> part is attempted instead. The syntax consists of a pair of round brackets. The opening bracket must be followed by a question mark, immediately followed by the <EM>if</EM> part, immediately followed by the <EM>then</EM> part. This part can be followed by a vertical bar and the <EM>else</EM> part. You may omit the <EM>else</EM> part, and the vertical bar with it.</P> <P>For the <EM>if</EM> part, you can use the <A HREF="lookaround.html" TARGET="_top">lookahead and lookbehind</A> constructs. Using positive lookahead, the syntax becomes <TT CLASS=regex>(?(?=regex)then|else)</TT>. Because the lookahead has its own parentheses, the <EM>if</EM> and <EM>then</EM> parts are clearly separated.</P> <P>Remember that the lookaround constructs do not consume any characters. If you use a lookahead as the <EM>if</EM> part, then the regex engine will attempt to match the <EM>then</EM> or <EM>else part</EM> (depending on the outcome of the lookahead) at the same position where the <EM>if</EM> was attempted.</P> <P>Alternatively, you can check in the <EM>if</EM> part whether a <A HREF="brackets.html" TARGET="_top">capturing group</A> has taken part in the match thus far. Place the number of the capturing group inside round brackets, and use that as the if part. Note that although the syntax for a conditional check on a backreference is the same as a number inside a capturing groups, no capturing groups is created. The number and the brackets are part of the if-then-else syntax started with <TT CLASS=regex>(?</TT>.</P> <P>The regex <TT CLASS=regex>(a)?b(?(1)c|d)</TT> matches <TT CLASS=match>bd</TT> and <TT class=match>abc</TT>. If the a can be matched, the first capturing group takes part in the match. The conditional then uses the <EM>then</EM> part <TT CLASS=regex>c</TT>. Otherwise, the <EM>else</EM> part <TT CLASS=regex>d</TT> is used.</P> <P>For the <EM>then</EM> and <EM>else</EM>, you can use any regular expression. If you want to use <A HREF="alternation.html" TARGET="_top">alternation</A>, you will have to group the <EM>then</EM> or <EM>else</EM> together using <A HREF="brackets.html" TARGET="_top">parentheses</A>, like in <TT CLASS=regex>(?(?=condition)(then1|then2|then3)|(else1|else2|else3))</TT>. Otherwise, there is no need to use parentheses around the <EM>then</EM> and <EM>else</EM> parts.</P> <H2>Regex Flavors</H2> <P>Conditionals are supported by <A HREF="pcre.html" TARGET="_top">PCRE</A>, the <A HREF="php.html" TARGET="_top">PHP preg functions</A> and the <A HREF="dotnet.html" TARGET="_top">.NET framework</A>. The latest versions of <A HREF="editpadpro.html" TARGET="_top">EditPad Pro</A>, <A HREF="powergrep.html" TARGET="_top">PowerGREP</A> and <A HREF="regexbuddy.html" TARGET="_top">RegexBuddy</A> also support them.</P> <P>The .NET framework allows you to use the name of a <A HREF="named.html" TARGET="_top">named capturing group</A> for the <EM>if</EM> test, e.g.: <TT CLASS=regex>(?&lt;test&gt;a)?b(?(test)c|d)</TT>. None of the other flavors, though they all support named capture, allow the name of a group as a conditional test. You have to use the number.</P> <H2>Example: Extract Email Headers</H2> <P>The regex <TT CLASS=regex>^((From|To)|Subject): ((?(2)\w+@\w+\.[a-z]+|.+))</TT> extracts the From, To, and Subject headers from an email message. The name of the header is captured into the first backreference. If the header is the From or To header, it is captured into the second backreference as well.</P> <P>The second part of the pattern is the if-then-else conditional <TT CLASS=regex>(?(2)\w+@\w+\.[a-z]+|.+))</TT>. The if part checks if the second capturing group took part in the match thus far. It will have if the header is the From or To header. In that case, we the <EM>then</EM> part of the conditional <TT CLASS=regex>\w+@\w+\.[a-z]+</TT> tries to match an email address. To keep the example simple, we use an overly simple regex to match the email address, and we don't try to match the display name that is usually also part of the From or To header.</P> <P>If the second capturing group did not participate in the match this far, the <EM>else</EM> part <TT CLASS=regex>.+</TT> is attempted instead.</P> <P>Finally, we place an extra pair of round brackets around the conditional. This captures the contents of the email header matched by the conditional into the third backreference. The conditional itself does not capture anything.</P><DIV CLASS=copyright> <P CLASS=copyright>Page URL: <A HREF="conditional.html" TARGET="_top">http://www.Regular-Expressions.info/conditional.html</A><BR> Last Updated: 08 February 2005<BR> Copyright &copy; 2003-2005 Jan Goyvaerts. All rights reserved.</P> </DIV> </DIV> <DIV CLASS=side><TABLE CLASS=side CELLSPACING=0 CELLPADDING=4><TR><TD CLASS=sideheader>Regex Tutorial</TD></TR><TR><TD><A HREF="tutorial.html" TARGET=_top>Introduction</A></TD></TR><TR><TD><A HREF="tutorialcnt.html" TARGET=_top>Table&nbsp;of&nbsp;Contents</A></TD></TR><TR><TD><A HREF="characters.html" TARGET=_top>Characters</A></TD></TR><TR><TD><A HREF="engine.html" TARGET=_top>Regex&nbsp;Engine&nbsp;Internals</A></TD></TR><TR><TD><A HREF="charclass.html" TARGET=_top>Character&nbsp;Classes</A></TD></TR><TR><TD><A HREF="dot.html" TARGET=_top>Dot</A></TD></TR><TR><TD><A HREF="anchors.html" TARGET=_top>Anchors</A></TD></TR><TR><TD><A HREF="wordboundaries.html" TARGET=_top>Word&nbsp;Boundaries</A></TD></TR><TR><TD><A HREF="alternation.html" TARGET=_top>Alternation</A></TD></TR><TR><TD><A HREF="optional.html" TARGET=_top>Optional&nbsp;Items</A></TD></TR><TR><TD><A HREF="repeat.html" TARGET=_top>Repetition</A></TD></TR><TR><TD><A HREF="brackets.html" TARGET=_top>Grouping&nbsp;&amp;&nbsp;Backreferences</A></TD></TR><TR><TD><A HREF="named.html" TARGET=_top>Named&nbsp;Groups</A></TD></TR><TR><TD><A HREF="unicode.html" TARGET=_top>Unicode</A></TD></TR><TR><TD><A HREF="modifiers.html" TARGET=_top>Modifiers</A></TD></TR><TR><TD><A HREF="atomic.html" TARGET=_top>Atomic&nbsp;Grouping</A></TD></TR><TR><TD><A HREF="lookaround.html" TARGET=_top>Lookahead&nbsp;&amp;&nbsp;Lookbehind</A></TD></TR><TR><TD><A HREF="lookaround2.html" TARGET=_top>Lookaround,&nbsp;part&nbsp;2</A></TD></TR><TR><TD><A HREF="continue.html" TARGET=_top>Continuing&nbsp;Matches</A></TD></TR><TR><TD><A HREF="conditional.html" TARGET=_top>Conditionals</A></TD></TR><TR><TD><A HREF="comments.html" TARGET=_top>Comments</A></TD></TR>
</TABLE><TABLE CLASS=side CELLSPACING=0 CELLPADDING=4><TR><TD CLASS=sideheader>More Information</TD></TR><TR><TD><A HREF="index-2.html" TARGET=_top>Introduction</A></TD></TR><TR><TD><A HREF="quickstart.html" TARGET=_top>Quick&nbsp;Start</A></TD></TR><TR><TD><A HREF="tutorial.html" TARGET=_top>Tutorial</A></TD></TR><TR><TD><A HREF="tools.html" TARGET=_top>Tools&nbsp;and&nbsp;Languages</A></TD></TR><TR><TD><A HREF="examples.html" TARGET=_top>Examples</A></TD></TR><TR><TD><A HREF="books.html" TARGET=_top>Books</A></TD></TR><TR><TD><A HREF="reference.html" TARGET=_top>Reference</A></TD></TR><TR><TD><A HREF="about.html" TARGET=_top>About&nbsp;This&nbsp;Site</A></TD></TR><TR><TD><A HREF="print.html" TARGET=_top>Download&nbsp;and&nbsp;Print</A></TD></TR></TABLE></DIV></BODY>
<!-- Mirrored from www.regular-expressions.info/conditional.html by HTTrack Website Copier/3.x [XR&CO'2002], Mon, 14 Nov 2005 11:49:52 GMT -->
</HTML>