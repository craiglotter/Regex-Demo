<HTML>
<!-- Mirrored from www.regular-expressions.info/alternation.html by HTTrack Website Copier/3.x [XR&CO'2002], Mon, 14 Nov 2005 11:48:50 GMT -->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Regex Tutorial - Alternation with The Vertical Bar</TITLE>

<META NAME="Author" CONTENT="Jan Goyvaerts">
<META NAME="Description" CONTENT="In a regular expression, the vertical bar or pipe symbol tells the regex engine to match any of two or more options">
<META NAME="Keywords" CONTENT="">
<LINK REL=StyleSheet HREF="regex.css" TYPE="text/css">
</HEAD>
<BODY BGCOLOR=white TEXT=black>
<DIV CLASS=top><DIV CLASS=logo><IMG SRC="img/logo.gif" WIDTH=530 HEIGHT=100></DIV></DIV>
<DIV CLASS=btntop><A CLASS=btntop HREF="tutorial.html" TARGET="_top">&nbsp;Tutorial&nbsp;</A><A CLASS=btntop HREF="tools.html" TARGET="_top">&nbsp;Tools&nbsp;&amp;&nbsp;Languages&nbsp;</A><A CLASS=btntop HREF="examples.html" TARGET="_top">&nbsp;Examples&nbsp;</A><A CLASS=btntop HREF="books.html" TARGET="_top">&nbsp;Books&nbsp;&amp;&nbsp;Reference&nbsp;</A></DIV>
<DIV CLASS=bodytext>
<TABLE CLASS=topad> <TR><TD VALIGN=top><A HREF="http://www.regexbuddy.com/create.html" TARGET="_top"><IMG SRC="img/rxb48.gif" WIDTH=48 HEIGHT=48 ALT="RegexBuddy" BORDER=0></A></TD> <TD CLASS=topad><A HREF="http://www.regexbuddy.com/create.html" TARGET="_top">Easily create and understand regular expressions today</A>. Compose and analyze regex patterns with RegexBuddy's easy-to-grasp regex blocks and intuitive regex tree, instead of or in combination with the traditional regex syntax. Developed by the author of this web site, RegexBuddy makes learning and using regular expressions easier than ever. <A HREF="http://www.regexbuddy.com/">Get your own copy of RegexBuddy now</A>, and get a FREE printable PDF version of the regex tutorial on this web site.</TD> </TR></TABLE> <H1>Alternation with The Vertical Bar or Pipe Symbol</H1> <P>I already explained how you can use <A HREF="charclass.html" TARGET="_top">character classes</A> to match a single character out of several possible characters. Alternation is similar. You can use alternation to match a single regular expression out of several possible regular expressions.</P> <P>If you want to search for the literal text <TT CLASS=regex>cat</TT> or <TT CLASS=regex>dog</TT>, separate both options with a vertical bar or pipe symbol: <TT CLASS=regex>cat|dog</TT>. If you want more options, simply expand the list: <TT CLASS=regex>cat|dog|mouse|fish</TT> <A HREF="regexbuddy/alternation.html"><IMG SRC="img/rxb.gif" WIDTH="16" HEIGHT="16" ALIGN=middle ALT="Analyze this regular expression with RegexBuddy" BORDER=0></A>.</P> <P>The alternation operator has the lowest precedence of all regex operators. That is, it tells the regex engine to match either everything to the left of the vertical bar, or everything to the right of the vertical bar. If you want to limit the reach of the alternation, you will need to use round brackets for grouping. If we want to improve the first example to match whole words only, we would need to use <TT CLASS=regex>\b(cat|dog)\b</TT>. This tells the regex engine to find a <A HREF="wordboundaries.html" TARGET="_top">word boundary</A>, then either "cat" or "dog", and then another word boundary. If we had omitted the round brackets, the regex engine would have searched for "a word boundary followed by cat", or, "dog followed by a word boundary.</P> <H2>Remember That The Regex Engine Is Eager</H2> <P>I already explained that <A HREF="engine.html" TARGET="_top">the regex engine is eager</A>. It will stop searching as soon as it finds a valid match. The consequence is that in certain situations, the order of the alternatives matters. Suppose you want to use a regex to match a list of function names in a programming language: Get, GetValue, Set or SetValue. The obvious solution is <TT CLASS=regex>Get|GetValue|Set|SetValue</TT>. Let's see how this works out when the string is <TT CLASS=string>SetValue</TT>.</P> <P>The regex engine starts at the first token in the regex, <TT CLASS=regex>G</TT>, and at the first character in the string, <TT CLASS=string>S</TT>. The match fails. However, the regex engine studied the entire regular expression before starting. So it knows that this regular expression uses alternation, and that the entire regex has not failed yet. So it continues with the second option, being the second <TT CLASS=regex>G</TT> in the regex. The match fails again. The next token is the first <TT CLASS=regex>S</TT> in the regex. The match succeeds, and the engine continues with the next character in the string, as well as the next token in the regex. The next token in the regex is the <TT CLASS=regex>e</TT> after the <TT CLASS=regex>S</TT> that just successfully matched. <TT CLASS=regex>e</TT> matches <TT CLASS=match>e</TT>. The next token, <TT CLASS=regex>t</TT> matches <TT CLASS=match>t</TT>.</P> <P>At this point, the third option in the alternation has been successfully matched. Because the regex engine is eager, it considers the entire alternation to have been successfully matched as soon as one of the options has. In this example, there are no other tokens in the regex outside the alternation, so the entire regex has successfully matched <TT CLASS=match>Set</TT> in <TT CLASS=string>SetValue</TT>.</P> <P>Contrary to what we intended, the regex did not match the entire string. There are several solutions. One option is to take into account that the regex engine is eager, and change the order of the options. If we use <TT CLASS=regex>GetValue|Get|SetValue|Set</TT>, <TT CLASS=regex>SetValue</TT> will be attempted before <TT CLASS=regex>Set</TT>, and the engine will match the entire string. We could also combine the four options into two and use the <A HREF="optional.html" TARGET="_top">question mark</A> to make part of them optional: <TT CLASS=regex>Get(Value)?|Set(Value)?</TT>. Because the question mark is greedy, <TT CLASS=regex>SetValue</TT> will be attempted before <TT CLASS=regex>Set</TT>.</P> <P>The best option is probably to express the fact that we only want to match complete words. We do not want to match Set or SetValue if the string is <TT CLASS=string>SetValueFunction</TT>. So the solution is <TT CLASS=regex>\b(Get|GetValue|Set|SetValue)\b</TT> or <TT CLASS=regex>\b(Get(Value)?|Set(Value)?)\b</TT>. Since all options have the same end, we can optimize this further to <TT CLASS=regex>\b(Get|Set)(Value)?\b</TT> <A HREF="regexbuddy/alternationoptimized.html"><IMG SRC="img/rxb.gif" WIDTH="16" HEIGHT="16" ALIGN=middle ALT="Analyze this regular expression with RegexBuddy" BORDER=0></A>.</P><DIV CLASS=copyright> <P CLASS=copyright>Page URL: <A HREF="alternation.html" TARGET="_top">http://www.Regular-Expressions.info/alternation.html</A><BR> Last Updated: 01 September 2004<BR> Copyright &copy; 2003-2005 Jan Goyvaerts. All rights reserved.</P> </DIV> </DIV> <DIV CLASS=side><TABLE CLASS=side CELLSPACING=0 CELLPADDING=4><TR><TD CLASS=sideheader>Regex Tutorial</TD></TR><TR><TD><A HREF="tutorial.html" TARGET=_top>Introduction</A></TD></TR><TR><TD><A HREF="tutorialcnt.html" TARGET=_top>Table&nbsp;of&nbsp;Contents</A></TD></TR><TR><TD><A HREF="characters.html" TARGET=_top>Characters</A></TD></TR><TR><TD><A HREF="engine.html" TARGET=_top>Regex&nbsp;Engine&nbsp;Internals</A></TD></TR><TR><TD><A HREF="charclass.html" TARGET=_top>Character&nbsp;Classes</A></TD></TR><TR><TD><A HREF="dot.html" TARGET=_top>Dot</A></TD></TR><TR><TD><A HREF="anchors.html" TARGET=_top>Anchors</A></TD></TR><TR><TD><A HREF="wordboundaries.html" TARGET=_top>Word&nbsp;Boundaries</A></TD></TR><TR><TD><A HREF="alternation.html" TARGET=_top>Alternation</A></TD></TR><TR><TD><A HREF="optional.html" TARGET=_top>Optional&nbsp;Items</A></TD></TR><TR><TD><A HREF="repeat.html" TARGET=_top>Repetition</A></TD></TR><TR><TD><A HREF="brackets.html" TARGET=_top>Grouping&nbsp;&amp;&nbsp;Backreferences</A></TD></TR><TR><TD><A HREF="named.html" TARGET=_top>Named&nbsp;Groups</A></TD></TR><TR><TD><A HREF="unicode.html" TARGET=_top>Unicode</A></TD></TR><TR><TD><A HREF="modifiers.html" TARGET=_top>Modifiers</A></TD></TR><TR><TD><A HREF="atomic.html" TARGET=_top>Atomic&nbsp;Grouping</A></TD></TR><TR><TD><A HREF="lookaround.html" TARGET=_top>Lookahead&nbsp;&amp;&nbsp;Lookbehind</A></TD></TR><TR><TD><A HREF="lookaround2.html" TARGET=_top>Lookaround,&nbsp;part&nbsp;2</A></TD></TR><TR><TD><A HREF="continue.html" TARGET=_top>Continuing&nbsp;Matches</A></TD></TR><TR><TD><A HREF="conditional.html" TARGET=_top>Conditionals</A></TD></TR><TR><TD><A HREF="comments.html" TARGET=_top>Comments</A></TD></TR>
</TABLE><TABLE CLASS=side CELLSPACING=0 CELLPADDING=4><TR><TD CLASS=sideheader>More Information</TD></TR><TR><TD><A HREF="index-2.html" TARGET=_top>Introduction</A></TD></TR><TR><TD><A HREF="quickstart.html" TARGET=_top>Quick&nbsp;Start</A></TD></TR><TR><TD><A HREF="tutorial.html" TARGET=_top>Tutorial</A></TD></TR><TR><TD><A HREF="tools.html" TARGET=_top>Tools&nbsp;and&nbsp;Languages</A></TD></TR><TR><TD><A HREF="examples.html" TARGET=_top>Examples</A></TD></TR><TR><TD><A HREF="books.html" TARGET=_top>Books</A></TD></TR><TR><TD><A HREF="reference.html" TARGET=_top>Reference</A></TD></TR><TR><TD><A HREF="about.html" TARGET=_top>About&nbsp;This&nbsp;Site</A></TD></TR><TR><TD><A HREF="print.html" TARGET=_top>Download&nbsp;and&nbsp;Print</A></TD></TR></TABLE></DIV></BODY>
<!-- Mirrored from www.regular-expressions.info/alternation.html by HTTrack Website Copier/3.x [XR&CO'2002], Mon, 14 Nov 2005 11:48:50 GMT -->
</HTML>