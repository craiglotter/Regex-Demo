<HTML>
<!-- Mirrored from www.regular-expressions.info/named.html by HTTrack Website Copier/3.x [XR&CO'2002], Mon, 14 Nov 2005 11:49:52 GMT -->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Regex Tutorial - Named Capturing Groups - Backreference Names</TITLE>

<META NAME="Author" CONTENT="Jan Goyvaerts">
<META NAME="Description" CONTENT="">
<META NAME="Keywords" CONTENT="">
<LINK REL=StyleSheet HREF="regex.css" TYPE="text/css">
</HEAD>
<BODY BGCOLOR=white TEXT=black>
<DIV CLASS=top><DIV CLASS=logo><IMG SRC="img/logo.gif" WIDTH=530 HEIGHT=100></DIV></DIV>
<DIV CLASS=btntop><A CLASS=btntop HREF="tutorial.html" TARGET="_top">&nbsp;Tutorial&nbsp;</A><A CLASS=btntop HREF="tools.html" TARGET="_top">&nbsp;Tools&nbsp;&amp;&nbsp;Languages&nbsp;</A><A CLASS=btntop HREF="examples.html" TARGET="_top">&nbsp;Examples&nbsp;</A><A CLASS=btntop HREF="books.html" TARGET="_top">&nbsp;Books&nbsp;&amp;&nbsp;Reference&nbsp;</A></DIV>
<DIV CLASS=bodytext>
<TABLE CLASS=topad> <TR><TD VALIGN=top><A HREF="http://www.regexbuddy.com/create.html" TARGET="_top"><IMG SRC="img/rxb48.gif" WIDTH=48 HEIGHT=48 ALT="RegexBuddy" BORDER=0></A></TD> <TD CLASS=topad><A HREF="http://www.regexbuddy.com/create.html" TARGET="_top">Easily create and understand regular expressions today</A>. Compose and analyze regex patterns with RegexBuddy's easy-to-grasp regex blocks and intuitive regex tree, instead of or in combination with the traditional regex syntax. Developed by the author of this web site, RegexBuddy makes learning and using regular expressions easier than ever. <A HREF="http://www.regexbuddy.com/">Get your own copy of RegexBuddy now</A>, and get a FREE printable PDF version of the regex tutorial on this web site.</TD> </TR></TABLE> <H1>Named Capturing Groups</H1> <P>All modern regular expression engines support <A HREF="brackets.html" TARGET="_top">capturing groups</A>, which are numbered from left to right, starting with one. The numbers can then be used in <A HREF="brackets.html" TARGET="_top">backreferences</A> to match the same text again in the regular expression, or to use part of the regex match for further processing. In a complex regular expression with many capturing groups, the numbering can get a little confusing.</P> <H2>Named Capture with Python, PCRE and PHP</H2> <P><A HREF="python.html" TARGET="_top">Python's regex module</A> was the first to offer a solution: named capture. By assigning a name to a capturing group, you can easily reference it by name. <TT CLASS=regex>(?P&lt;name&gt;group)</TT> captures the match of <TT CLASS=regex>group</TT> into the backreference "name". You can reference the contents of the group with the numbered backreference <TT CLASS=regex>\1</TT> or the named backreference <TT CLASS=regex>(?P=name)</TT>.</P> <P>The <A HREF="pcre.html" TARGET="_top">open source PCRE library</A> has followed Python's example, and offers named capture using the same syntax. The <A HREF="php.html" TARGET="_top">PHP preg functions</A> offer the same functionality, since they are based on PCRE.</P> <P>Python's <TT CLASS=code>sub()</TT> function allows you to reference a named group as <TT CLASS=string>\1</TT> or <TT CLASS=string>\g&lt;name&gt;</TT>. This does <I>not</I> work in PHP. In PHP, you can use double-quoted string interpolation with the <TT CLASS=code>$regs</TT> parameter you passed to <TT CLASS=code>pcre_match()</TT>: <TT CLASS=string>$regs['name']</TT>. <H2>Named Capture with .NET's System.Text.RegularExpressions</H2> <P>The <A HREF="dotnet.html" TARGET="_top">regular expression classes of the .NET framework</A> also support named capture. Unfortunately, the Microsoft developers decided to invent their own syntax, rather than follow the one pioneered by Python. Currently, no other regex flavor supports Microsoft's version of named capture.</P> <P>Here is an example with two capturing groups in .NET style: <TT CLASS=regex>(?&lt;first&gt;group)(?'second'group)</TT>. As you can see, .NET offers two syntaxes to create a capturing group: one using sharp brackets, and the other using single quotes. The first syntax is preferable in strings, where single quotes may need to be escaped. The second syntax is preferable in ASP code, where the sharp brackets are used for HTML tags. You can use the pointy bracket flavor and the quoted flavors interchangeably.</P> <P>To reference a capturing group inside the regex, use <TT CLASS=regex>\k&lt;name&gt;</TT> or <TT CLASS=regex>\k'name'</TT>. Again, you can use the two syntactic variations interchangeably.</P> <P>When doing a search-and-replace, you can reference the named group with the familiar dollar sign syntax: <TT CLASS=string>${name}</TT>. Simply use a name instead of a number between the curly braces.</P> <H2>Names and Numbers for Capturing Groups</H2> <P>Here is where things get a bit ugly. Python and PCRE treat named capturing groups just like unnamed capturing groups, and number both kinds from left to right, starting with one. The regex <TT CLASS=regex>(a)(?P&lt;x&gt;b)(c)(?P&lt;y&gt;d)</TT> matches <TT CLASS=match>abcd</TT> as expected. If you do a search-and-replace with this regex and the replacement <TT CLASS=string>\1\2\3\4</TT>, you will get <TT CLASS=string>abcd</TT>. All four groups were numbered from left to right, from one till four. Easy and logical.</P> <P>Things are quite a bit more complicated with the .NET framework. The regex <TT CLASS=regex>(a)(?&lt;x&gt;b)(c)(?&lt;y&gt;d)</TT> again matches <TT CLASS=match>abcd</TT>. However, if you do a search-and-replace with <TT CLASS=string>$1$2$3$4</TT> as the replacement, you will get <TT CLASS=string>acbd</TT>. Probably not what you expected.</P> <P>The .NET framework <I>does</I> number named capturing groups from left to right, but numbers them <I>after</I> all the unnamed groups have been numbered. So the unnamed groups <TT CLASS=regex>(a)</TT> and <TT CLASS=regex>(c)</TT> get numbered first, from left to right, starting at one. Then the named groups <TT CLASS=regex>(?&lt;x&gt;b)</TT> and <TT CLASS=regex>(?&lt;y&gt;d)</TT> get their numbers, continuing from the unnamed groups, in this case: three.</P> <P>To make things simple, when using .NET's regex support, just assume that named groups do not get numbered at all, and reference them by name exclusively. To keep things compatible across regex flavors, I strongly recommend that you do not mix named and unnamed capturing groups at all. Either give a group a name, or make it non-capturing as in <TT CLASS=regex>(?:nocapture)</TT>. Non-capturing groups are more efficient, since the regex engine does not need to keep track of their matches.</P> <H2>Other Regex Flavors</H2> <P><A HREF="editpadpro.html" TARGET="_top">EditPad Pro</A> and <A HREF="powergrep.html" TARGET="_top">PowerGREP</A> support both the Python syntax and the .NET syntax for named capture. However, they will number named groups along with unnamed capturing groups, just like Python does.</P> <P><A HREF="regexbuddy.html" TARGET="_top">RegexBuddy</A> also supports both Python's and Microsoft's style. RegexBuddy will convert one flavor of named capture into the other when generating source code snippets for Python, PHP/preg, PHP, or one of the .NET languages.</P> <P>None of the other regex flavors discussed on this website support named capture.</P><DIV CLASS=copyright> <P CLASS=copyright>Page URL: <A HREF="named.html" TARGET="_top">http://www.Regular-Expressions.info/named.html</A><BR> Last Updated: 29 January 2005<BR> Copyright &copy; 2003-2005 Jan Goyvaerts. All rights reserved.</P> </DIV> </DIV> <DIV CLASS=side><TABLE CLASS=side CELLSPACING=0 CELLPADDING=4><TR><TD CLASS=sideheader>Regex Tutorial</TD></TR><TR><TD><A HREF="tutorial.html" TARGET=_top>Introduction</A></TD></TR><TR><TD><A HREF="tutorialcnt.html" TARGET=_top>Table&nbsp;of&nbsp;Contents</A></TD></TR><TR><TD><A HREF="characters.html" TARGET=_top>Characters</A></TD></TR><TR><TD><A HREF="engine.html" TARGET=_top>Regex&nbsp;Engine&nbsp;Internals</A></TD></TR><TR><TD><A HREF="charclass.html" TARGET=_top>Character&nbsp;Classes</A></TD></TR><TR><TD><A HREF="dot.html" TARGET=_top>Dot</A></TD></TR><TR><TD><A HREF="anchors.html" TARGET=_top>Anchors</A></TD></TR><TR><TD><A HREF="wordboundaries.html" TARGET=_top>Word&nbsp;Boundaries</A></TD></TR><TR><TD><A HREF="alternation.html" TARGET=_top>Alternation</A></TD></TR><TR><TD><A HREF="optional.html" TARGET=_top>Optional&nbsp;Items</A></TD></TR><TR><TD><A HREF="repeat.html" TARGET=_top>Repetition</A></TD></TR><TR><TD><A HREF="brackets.html" TARGET=_top>Grouping&nbsp;&amp;&nbsp;Backreferences</A></TD></TR><TR><TD><A HREF="named.html" TARGET=_top>Named&nbsp;Groups</A></TD></TR><TR><TD><A HREF="unicode.html" TARGET=_top>Unicode</A></TD></TR><TR><TD><A HREF="modifiers.html" TARGET=_top>Modifiers</A></TD></TR><TR><TD><A HREF="atomic.html" TARGET=_top>Atomic&nbsp;Grouping</A></TD></TR><TR><TD><A HREF="lookaround.html" TARGET=_top>Lookahead&nbsp;&amp;&nbsp;Lookbehind</A></TD></TR><TR><TD><A HREF="lookaround2.html" TARGET=_top>Lookaround,&nbsp;part&nbsp;2</A></TD></TR><TR><TD><A HREF="continue.html" TARGET=_top>Continuing&nbsp;Matches</A></TD></TR><TR><TD><A HREF="conditional.html" TARGET=_top>Conditionals</A></TD></TR><TR><TD><A HREF="comments.html" TARGET=_top>Comments</A></TD></TR>
</TABLE><TABLE CLASS=side CELLSPACING=0 CELLPADDING=4><TR><TD CLASS=sideheader>More Information</TD></TR><TR><TD><A HREF="index-2.html" TARGET=_top>Introduction</A></TD></TR><TR><TD><A HREF="quickstart.html" TARGET=_top>Quick&nbsp;Start</A></TD></TR><TR><TD><A HREF="tutorial.html" TARGET=_top>Tutorial</A></TD></TR><TR><TD><A HREF="tools.html" TARGET=_top>Tools&nbsp;and&nbsp;Languages</A></TD></TR><TR><TD><A HREF="examples.html" TARGET=_top>Examples</A></TD></TR><TR><TD><A HREF="books.html" TARGET=_top>Books</A></TD></TR><TR><TD><A HREF="reference.html" TARGET=_top>Reference</A></TD></TR><TR><TD><A HREF="about.html" TARGET=_top>About&nbsp;This&nbsp;Site</A></TD></TR><TR><TD><A HREF="print.html" TARGET=_top>Download&nbsp;and&nbsp;Print</A></TD></TR></TABLE><P>&nbsp;</P> <TABLE CLASS=side CELLSPACING=0 CELLPADDING=4> <TR><TD CLASS=sideheader>PowerGREP 3</TD></TR> <TR><TD CLASS=ad><A HREF="http://www.powergrep.com/" TARGET=_top><IMG SRC="img/pgr.gif" WIDTH=32 HEIGHT=32 ALT="PowerGREP" ALIGN=LEFT CLASS=iconleft BORDER=0></A> <A HREF="http://www.powergrep.com/" TARGET=_top>PowerGREP</A> is probably the most powerful regex-based text processing tool available today. A knowledge worker's Swiss army knife for searching through, extracting information from, and updating piles of files.</TD></TR> <TR><TD CLASS=ad>Use regular expressions to search through large numbers of text and binary files, such as source code, correspondence, server or system logs, reference texts, archives, etc. Quickly find the files you are looking for, or extract the information you need. Look through just a handful of files, or thousands of files and folders.</TD></TR> <TR><TD CLASS=ad>Perform comprehensive text and binary replacement operations for easy maintenance of web sites, source code, reports, etc. Preview replacements before modifying files, and stay safe with flexible backup and undo options.</TD></TR> <TR><TD CLASS=ad>Work with plain text files, Unicode files, binary files, files stored in zip archives, and even MS Word documents, Excel spreadsheets and PDF files. Runs on Windows 98, ME, NT4, 2000 &amp; XP.</TD></TR> <TR><TD><A HREF="http://www.powergrep.com/" TARGET=_top>More information</A></TD></TR> <TR><TD><A HREF="http://www.powergrep.com/download.html" TARGET=_top>Download PowerGREP now</A></TD></TR> </TABLE></DIV></BODY>
<!-- Mirrored from www.regular-expressions.info/named.html by HTTrack Website Copier/3.x [XR&CO'2002], Mon, 14 Nov 2005 11:49:52 GMT -->
</HTML>