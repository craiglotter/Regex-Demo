<HTML>
<!-- Mirrored from www.regular-expressions.info/optional.html by HTTrack Website Copier/3.x [XR&CO'2002], Mon, 14 Nov 2005 11:48:50 GMT -->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<TITLE>Regex Tutorial - The Question Mark Makes the Preceding Token Optional</TITLE>

<META NAME="Author" CONTENT="Jan Goyvaerts">
<META NAME="Description" CONTENT="In a regular expression, the question mark makes the preceding token optional.">
<META NAME="Keywords" CONTENT="">
<LINK REL=StyleSheet HREF="regex.css" TYPE="text/css">
</HEAD>
<BODY BGCOLOR=white TEXT=black>
<DIV CLASS=top><DIV CLASS=logo><IMG SRC="img/logo.gif" WIDTH=530 HEIGHT=100></DIV></DIV>
<DIV CLASS=btntop><A CLASS=btntop HREF="tutorial.html" TARGET="_top">&nbsp;Tutorial&nbsp;</A><A CLASS=btntop HREF="tools.html" TARGET="_top">&nbsp;Tools&nbsp;&amp;&nbsp;Languages&nbsp;</A><A CLASS=btntop HREF="examples.html" TARGET="_top">&nbsp;Examples&nbsp;</A><A CLASS=btntop HREF="books.html" TARGET="_top">&nbsp;Books&nbsp;&amp;&nbsp;Reference&nbsp;</A></DIV>
<DIV CLASS=bodytext>
<TABLE CLASS=topad> <TR><TD VALIGN=top><A HREF="http://www.regexbuddy.com/create.html" TARGET="_top"><IMG SRC="img/rxb48.gif" WIDTH=48 HEIGHT=48 ALT="RegexBuddy" BORDER=0></A></TD> <TD CLASS=topad><A HREF="http://www.regexbuddy.com/create.html" TARGET="_top">Easily create and understand regular expressions today</A>. Compose and analyze regex patterns with RegexBuddy's easy-to-grasp regex blocks and intuitive regex tree, instead of or in combination with the traditional regex syntax. Developed by the author of this web site, RegexBuddy makes learning and using regular expressions easier than ever. <A HREF="http://www.regexbuddy.com/">Get your own copy of RegexBuddy now</A>, and get a FREE printable PDF version of the regex tutorial on this web site.</TD> </TR></TABLE> <H1>Optional Items</H1> <P>The question mark makes the preceding token in the regular expression optional. E.g.:&nbsp;<TT CLASS=regex>colou?r</TT> matches both <TT CLASS=match>colour</TT> and <TT CLASS=match>color</TT>.</P> <P>You can make several tokens optional by grouping them together using round brackets, and placing the question mark after the closing bracket. E.g.:&nbsp;<TT CLASS=regex>Nov(ember)?</TT> will match <TT CLASS=match>Nov</TT> and <TT CLASS=match>November</TT>.</P> <P>You can write a regular expression that matches many alternatives by including more than one question mark. <TT CLASS=regex>Feb(ruary)? 23(rd)?</TT> matches <TT CLASS=match>February 23rd</TT>, <TT CLASS=match>February 23</TT>, <TT CLASS=match>Feb 23rd</TT> and <TT CLASS=match>Feb 23</TT>.</P> <H2>Important Regex Concept: Greediness</H2> <P>With the question mark, I have introduced the first metacharacter that is <I>greedy</I>. The question mark gives the regex engine two choices: try to match the part the question mark applies to, or do not try to match it. The engine will always try to match that part. Only if this causes the entire regular expression to fail, will the engine try ignoring the part the question mark applies to.</P> <P>The effect is that if you apply the regex <TT CLASS=regex>Feb 23(rd)?</TT> to the string <TT CLASS=string>Today is Feb 23rd, 2003</TT>, the match will always be <TT CLASS=match>Feb 23rd</TT> and not <TT CLASS=match>Feb 23</TT>. You can make the question mark <I>lazy</I> (i.e. turn off the greediness) by putting a second question mark after the first.</P> <P>I will say a lot more about greediness when discussing the other <A HREF="repeat.html" TARGET="_top">repetition</A> operators.</P> <H2>Looking Inside The Regex Engine</H2> <P>Let's apply the regular expression <TT CLASS=regex>colou?r</TT> to the string <TT CLASS=string>The colonel likes the color green</TT>.</P> <P>The first token in the regex is the <A HREF="characters.html" TARGET="_top">literal</A> <TT CLASS=regex>c</TT>. The first position where it matches successfully is the <TT CLASS=match>c</TT> in <TT CLASS=string>colonel</TT>. The engine continues, and finds that <TT CLASS=regex>o</TT> matches <TT CLASS=match>o</TT>, <TT CLASS=regex>l</TT> matches <TT CLASS=match>l</TT> and another <TT CLASS=regex>o</TT> matches <TT CLASS=match>o</TT>. Then the engine checks whether <TT CLASS=regex>u</TT> matches <TT CLASS=string>n</TT>. This fails. However, the question mark tells the regex engine that failing to match <TT CLASS=regex>u</TT> is acceptable. Therefore, the engine will skip ahead to the next regex token: <TT CLASS=regex>r</TT>. But this fails to match <TT CLASS=string>n</TT> as well. Now, the engine can only conclude that the entire regular expression cannot be matched starting at the <TT CLASS=match>c</TT> in <TT CLASS=string>colonel</TT>. Therefore, the engine starts again trying to match <TT CLASS=regex>c</TT> to the first o in <TT CLASS=string>colonel</TT>.</P> <P>After a series of failures, <TT CLASS=regex>c</TT> will match with the <TT CLASS=match>c</TT> in <TT CLASS=string>color</TT>, and <TT CLASS=regex>o</TT>, <TT CLASS=regex>l</TT> and <TT CLASS=regex>o</TT> match the following characters. Now the engine checks whether <TT CLASS=regex>u</TT> matches <TT CLASS=string>r</TT>. This fails. Again: no problem. The question mark allows the engine to continue with <TT CLASS=regex>r</TT>. This matches <TT CLASS=match>r</TT> and the engine reports that the regex successfully matched <TT CLASS=match>color</TT> in our string.</P><DIV CLASS=copyright> <P CLASS=copyright>Page URL: <A HREF="optional.html" TARGET="_top">http://www.Regular-Expressions.info/optional.html</A><BR> Last Updated: 17 May 2004<BR> Copyright &copy; 2003-2005 Jan Goyvaerts. All rights reserved.</P> </DIV> </DIV> <DIV CLASS=side><TABLE CLASS=side CELLSPACING=0 CELLPADDING=4><TR><TD CLASS=sideheader>Regex Tutorial</TD></TR><TR><TD><A HREF="tutorial.html" TARGET=_top>Introduction</A></TD></TR><TR><TD><A HREF="tutorialcnt.html" TARGET=_top>Table&nbsp;of&nbsp;Contents</A></TD></TR><TR><TD><A HREF="characters.html" TARGET=_top>Characters</A></TD></TR><TR><TD><A HREF="engine.html" TARGET=_top>Regex&nbsp;Engine&nbsp;Internals</A></TD></TR><TR><TD><A HREF="charclass.html" TARGET=_top>Character&nbsp;Classes</A></TD></TR><TR><TD><A HREF="dot.html" TARGET=_top>Dot</A></TD></TR><TR><TD><A HREF="anchors.html" TARGET=_top>Anchors</A></TD></TR><TR><TD><A HREF="wordboundaries.html" TARGET=_top>Word&nbsp;Boundaries</A></TD></TR><TR><TD><A HREF="alternation.html" TARGET=_top>Alternation</A></TD></TR><TR><TD><A HREF="optional.html" TARGET=_top>Optional&nbsp;Items</A></TD></TR><TR><TD><A HREF="repeat.html" TARGET=_top>Repetition</A></TD></TR><TR><TD><A HREF="brackets.html" TARGET=_top>Grouping&nbsp;&amp;&nbsp;Backreferences</A></TD></TR><TR><TD><A HREF="named.html" TARGET=_top>Named&nbsp;Groups</A></TD></TR><TR><TD><A HREF="unicode.html" TARGET=_top>Unicode</A></TD></TR><TR><TD><A HREF="modifiers.html" TARGET=_top>Modifiers</A></TD></TR><TR><TD><A HREF="atomic.html" TARGET=_top>Atomic&nbsp;Grouping</A></TD></TR><TR><TD><A HREF="lookaround.html" TARGET=_top>Lookahead&nbsp;&amp;&nbsp;Lookbehind</A></TD></TR><TR><TD><A HREF="lookaround2.html" TARGET=_top>Lookaround,&nbsp;part&nbsp;2</A></TD></TR><TR><TD><A HREF="continue.html" TARGET=_top>Continuing&nbsp;Matches</A></TD></TR><TR><TD><A HREF="conditional.html" TARGET=_top>Conditionals</A></TD></TR><TR><TD><A HREF="comments.html" TARGET=_top>Comments</A></TD></TR>
</TABLE><TABLE CLASS=side CELLSPACING=0 CELLPADDING=4><TR><TD CLASS=sideheader>More Information</TD></TR><TR><TD><A HREF="index-2.html" TARGET=_top>Introduction</A></TD></TR><TR><TD><A HREF="quickstart.html" TARGET=_top>Quick&nbsp;Start</A></TD></TR><TR><TD><A HREF="tutorial.html" TARGET=_top>Tutorial</A></TD></TR><TR><TD><A HREF="tools.html" TARGET=_top>Tools&nbsp;and&nbsp;Languages</A></TD></TR><TR><TD><A HREF="examples.html" TARGET=_top>Examples</A></TD></TR><TR><TD><A HREF="books.html" TARGET=_top>Books</A></TD></TR><TR><TD><A HREF="reference.html" TARGET=_top>Reference</A></TD></TR><TR><TD><A HREF="about.html" TARGET=_top>About&nbsp;This&nbsp;Site</A></TD></TR><TR><TD><A HREF="print.html" TARGET=_top>Download&nbsp;and&nbsp;Print</A></TD></TR></TABLE></DIV></BODY>
<!-- Mirrored from www.regular-expressions.info/optional.html by HTTrack Website Copier/3.x [XR&CO'2002], Mon, 14 Nov 2005 11:48:50 GMT -->
</HTML>